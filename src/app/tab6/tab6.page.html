<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      <img src="assets/img/logo-medica.png" alt="Logo Medica" style="width:35px;height:35px;vertical-align:middle;margin-right:8px;border-radius:4px;">  
      Mi Perfil
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">
        <img src="assets/img/logo-medica.png" alt="Logo Medica" style="width:35px;height:35px;vertical-align:middle;margin-right:8px;border-radius:4px;">
        Mi Perfil
      </ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Header de perfil con foto y nombre -->
  <div class="profile-header">
    <div class="profile-avatar-container">
      <ion-avatar class="profile-avatar">
        <img src="assets/img/avatar.png" alt="Foto de perfil" />
      </ion-avatar>
      <ion-button fill="clear" size="small" class="edit-photo-btn" (click)="editarFoto()" aria-label="Cambiar foto de perfil">
        <ion-icon name="camera-outline"></ion-icon>
      </ion-button>
    </div>
    
    <div class="profile-info">
      <h1>María Elena Rodríguez</h1>
      <p class="rut-info">RUT: 12.345.678-9</p>
    </div>
  </div>

  <!-- Información personal -->
  <ion-card class="info-card">
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="person-outline"></ion-icon>
        Información Personal
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list lines="none">
        <ion-item class="info-item">
          <div class="item-content">
            <div class="item-icon">
              <ion-icon name="mail-outline"></ion-icon>
            </div>
            <div class="item-details">
              <p class="item-label">Email</p>
              <p class="item-value">maria.rodriguez@gmail.com</p>
            </div>
          </div>
        </ion-item>
        
        <ion-item class="info-item">
          <div class="item-content">
            <div class="item-icon">
              <ion-icon name="call-outline"></ion-icon>
            </div>
            <div class="item-details">
              <p class="item-label">Teléfono</p>
              <p class="item-value">+56 9 8765 4321</p>
            </div>
          </div>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Preferencias -->
  <ion-card class="info-card">
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="settings-outline"></ion-icon>
        Preferencias
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list lines="none">
        <ion-item class="config-item">
          <div class="config-content">
            <div class="config-info">
              <div class="config-icon">
                <ion-icon name="moon-outline"></ion-icon>
              </div>
              <div class="config-details">
                <p class="config-label">Tema Oscuro</p>
                <p class="config-description">Cambiar apariencia de la app</p>
              </div>
            </div>
            <ion-toggle slot="end" [(ngModel)]="darkMode" (ionChange)="onDarkModeToggle()"></ion-toggle>
          </div>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Privacidad y Seguridad -->
  <ion-card class="info-card">
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="shield-checkmark-outline"></ion-icon>
        Privacidad y Seguridad
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list lines="none">
        <ion-item class="action-item" button (click)="verPoliticasPrivacidad()">
          <div class="action-content">
            <div class="action-icon success">
              <ion-icon name="information-circle-outline"></ion-icon>
            </div>
            <div class="action-details">
              <p class="action-label">Acerca de</p>
              <p class="action-description">Información de la aplicación</p>
            </div>
            <ion-icon name="chevron-forward-outline" class="chevron-icon"></ion-icon>
          </div>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Acciones importantes -->
  <div class="actions-section">
    <ion-button expand="block" color="danger" fill="outline" (click)="logout()" class="logout-btn">
      <ion-icon name="log-out-outline" slot="start"></ion-icon>
      Cerrar Sesión
    </ion-button>
    
    <div class="app-version">
      <p>Versión 1.0.0 - Última actualización: Nov 2025</p>
    </div>
  </div>
</ion-content>

<ion-modal [isOpen]="isPrivacyModalOpen" (didDismiss)="cerrarModal()">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-button (click)="cerrarModal()">
            <ion-icon name="close"></ion-icon>
          </ion-button>
        </ion-buttons>
        <ion-title>Acerca de</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">
      <div class="privacy-content">
        
        <div class="privacy-icon-header">
          <ion-icon name="lock-closed"></ion-icon>
        </div>

        <h2>Tu información está protegida</h2>
        
        <p class="privacy-message">Solo tú tienes acceso a tu información médica. Tus datos están almacenados de forma segura.</p>

        <p class="last-update">Versión 1.0.0 • Nov 2025</p>
      </div>
    </ion-content>
  </ng-template>
</ion-modal>